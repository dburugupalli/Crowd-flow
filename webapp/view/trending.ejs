<!DOCTYPE html>
<html lang="en">
   
    <link href="../../view/css/style.css" rel="stylesheet">
<body>
        <div id="trending" class="container-fluid">
                <div class="row mt-5">
                    <h1 class="text-center w-100">Trending Fundraisers</h1>
                    <h6 class="text-center w-100">View the fundraisers that are most active right now!!!</h6>
                </div>
                <section class="carousel slide carousel-fade" data-ride="carousel" id="postsCarousel">
                    <ol class="carousel-indicators">
                        <li data-target="#postsCarousel" data-slide-to="0" class="active"></li>
                        <li data-target="#postsCarousel" data-slide-to="1"></li>
                        <li data-target="#postsCarousel" data-slide-to="2"></li>
                    </ol>
<div class="container">
  <div class="row">
        <% if(typeof trendingFundRaisers != 'undefined') {  %>
        <% trendingFundRaisers.forEach(function(fr){ %>
          <div class="col-md-4">
            <div class="card card-custom bg-white border-white border-0">
              <div class="card-custom-img" style="background-image: url(../../view/images/fundraisers/<%=fr.image%>);"></div>
              <div class="card-custom-avatar">
                  
                  <img class="img-fluid" src="../view/images/user_placeholder.png" alt="Avatar" />
  
              </div>
              <div class="card-body" style="overflow-y: auto">
                    <% for(var i = 0 ; i < category1.length ; i++) {  %>
                        <%   if(category1[i]._id.equals(fr.categoryId)) { %>
                            
                <a href="./<%= category1[i]._id %>"><span class="badge badge-dark"><%= category1[i].categoryName %></span></a>
                            <%  break; %> 
                        <% } %>
                    <% } %>    
                <h4 class="card-title"><%=fr.title%></h4>
                <p class="card-text">By: <%=fr.fullName%></p>
                <p class="card-text"><%=fr.description%></p>
                <% for(var i =0; i < donationArray.length; i++) { %>
                    <% if(fr._id.equals(donationArray[i].fid)) {  %>
                    <%   percentage = Math.round((donationArray[i].totalDonations/fr.amount) *100) %>
            
                <div class="d-flex justify-content-between">
                    <div><b>$<%= donationArray[i].totalDonations %></b> raised</div>
                    <div><%=percentage%>%</div>
               </div>
                <div class="progress">
                  <div class="progress-bar progress-bar-striped" role="progressbar" style="width: <%=percentage%>%" aria-valuenow="<%=percentage%>" aria-valuemin="0" aria-valuemax="100"></div>          
                </div>
                Days Left : <%= donationArray[i].daysLeft %><br>
               Supports : <%= donationArray[i].numberofDonations%><br>
                  Fundraiser ended
                  <% break %>   
                  <%}%>
                <%}%>    
              </div>
              <div class="card-footer" style="background: inherit; border-color: inherit;">
                <a href="../fundraiser/fundraiserPage/<%=fr._id%>" class="btn btn-primary">View</a>
                <a href="#" class="btn btn-outline-primary">Other option</a>                
              </div>
            </div>
          </div>
        <% }); %>
        <%}%>
      </div>
        
      </div>
      
      
    </div>
</section>
</div>
    <% include ../partials/scripts %>
</body>

</html>